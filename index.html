<!DOCTYPE html>
<html>
<head>
    <title>Hammer.js</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <style>

        body {
            padding: 15px;
        }
        
        .container { position: relative; }
        
        .hitarea {
            position: fixed;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,.05);
		  background-color: rgba(0,0,0,.00);
          text-align: center;
          border: dashed 3px red;
        }
        

        .log li {
            display: inline-block;
            width: 49%;
          overflow: hidden;
        }
		.block { position: relative; z-index:1; }

        @media screen and (min-width: 640px) {
          .log li { width: 30%; }
        }
        
        .properties li { white-space: nowrap; }
        .properties span { margin-left: 5px; }

        .log li.active { background: lightgreen; }
        
        .log li.property-gesture {
            position: fixed;
            right: 0;
            top: 0;
            background: lightgreen;
            padding: 1px 4px;
            width: auto;
        }
		.bs-callout {
			margin: 20px 0;
			padding: 20px;
			border-left: 3px solid #eee;
		}
		.bs-callout-info {
			background-color: #f4f8fa;
			border-color: #5bc0de;
		}

    </style>
</head>
<body>

<div class="page-header">
  <h1>Hammer.js Example Test Page <small class="alert">Press shift on your desktop for multitouch.</small></h1>
</div>
<div class="bs-callout bs-callout-info">
    <div class="checkbox block">
        <label>
          <input type="checkbox" checked id="prevent-default"> block browser behavior (preventDefault)
        </label>
    </div>
</div>

<div class="container">
<div class="log panel">
	<div class="panel panel-default">
        <div class="panel-heading"><h4 class="panel-title">Events</h4></div>
        <ul class="unstyled events panel-body" id="events-list">
            <li>touch</li>
            <li>release</li>
            <li>hold</li>
            <li>tap</li>
            <li>doubletap</li>
        
            <li>dragstart</li>
            <li>drag</li>
            <li>dragend</li>
            <li>dragleft</li>
            <li>dragright</li>
            <li>dragup</li>
            <li>dragdown</li>
        
            <li>swipe</li>
            <li>swipeleft</li>
            <li>swiperight</li>
            <li>swipeup</li>
            <li>swipedown</li>
        
            <li>transformstart</li>
            <li>transform</li>
            <li>transformend</li>
            <li>rotate</li>
            <li>rotateleft</li>
            <li>rotateright</li>
            <li>pinch</li>
            <li>pinchin</li>
            <li>pinchout</li>
        </ul>
    </div>
    <div class="panel panel-default">
    	<div class="panel-heading"><h4 class="panel-title">EventData</h4></div>
        <ul class="unstyled properties panel-body">
            <li class="property-gesture"><strong>gesture</strong> <span id="log-prop-gesture"></span></li>
            <li><strong>touches</strong> <span id="log-prop-touches"></span></li>
            <li><strong>pointerType</strong> <span id="log-prop-pointerType"></span></li>
            <li><strong>center</strong> <span id="log-prop-center"></span></li>
            <li><strong>angle</strong> <span id="log-prop-angle"></span>&deg;</li>
            <li><strong>direction</strong> <span id="log-prop-direction"></span></li>
            <li><strong>distance</strong> <span id="log-prop-distance"></span>px</li>
    
            <li><strong>deltaTime</strong> <span id="log-prop-deltaTime"></span>ms</li>
            <li><strong>deltaX</strong> <span id="log-prop-deltaX"></span>px</li>
            <li><strong>deltaY</strong> <span id="log-prop-deltaY"></span>px</li>
    
            <li><strong>velocityX</strong> <span id="log-prop-velocityX"></span></li>
            <li><strong>velocityY</strong> <span id="log-prop-velocityY"></span></li>
    
            <li><strong>scale</strong>  <span id="log-prop-scale"></span></li>
            <li><strong>rotation</strong> <span id="log-prop-rotation"></span>&deg;</li>
    
            <li><strong>target</strong> <span id="log-prop-target"></span></li>
        </ul>
    </div>
</div>

<div id="hitarea" class="hitarea panel scrollable"></div>
</div>

<!-- jQuery is just for the demo! Hammer.js works without jQuery :-) -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

<script src="./js/jquery.hammer-full.js"></script>
<script src="./plugins/hammer.fakemultitouch.js"></script>
<script src="./plugins/hammer.showtouches.js"></script>


<!--[if !IE]> -->
<script>
    Hammer.plugins.showTouches();
</script>
<!-- <![endif]-->


<script>

    Hammer.plugins.fakeMultitouch();

    function getEl(id) {
        return document.getElementById(id);
    }


    var log_elements = {};
    var prevent_scroll_drag = true;


    $("#prevent-default").click(function() {
        hammertime.options.prevent_default = this.checked;
    });


    function getLogElement(type, name) {
        var el = log_elements[type + name];
        if(!el) {
            return log_elements[type + name] = getEl("log-"+ type +"-"+ name);
        }
        return el;
    }

    // log properties
    var properties = ['gesture','center','deltaTime','angle','direction',
        'distance','deltaX','deltaY','velocityX','velocityY', 'pointerType',
        'scale','rotation','touches','target'];

    function logEvent(ev) {
        if(!ev.gesture) {
            return;
        }

        // add to the large event log at the bottom of the page
        var log = [this.id, ev.type];
        //event_log.innerHTML = log.join(" - ") +"\n" + event_log.innerHTML;

        // highlight gesture
        var event_el = getLogElement('gesture', ev.type);
        event_el.className = "active";


        for(var i= 0,len=properties.length; i<len; i++) {
            var prop = properties[i];
            var value = ev.gesture[prop];
            switch(prop) {
                case 'center':
                    value = value.pageX +"x"+ value.pageY;
                    break;
                case 'gesture':
                    value = ev.type;
                    break;
                case 'target':
                    value = ev.gesture.target.tagName;
                    break;
                case 'touches':
                    value = ev.gesture.touches.length;
                    break;
            }
            getLogElement('prop', prop).innerHTML = value;
        }
    }
	(function ($) {
	    $.fn.docHasScrollBar = function () {
        return this.get(0).scrollHeight > this.height();
		};
		$.fn.elemHasScrollBar = function () {
			return this.get(0).scrollHeight > this.innerHeight();
		};
		$.fn.elemHasVScrollBar = function () {
			return this.get(0).scrollWidth > this.innerWidth();
		};
		$.fn.elemScrollFix = function () {
			this.addClass("touch");
			if (this.scrollTop() == 0)
				this.scrollTop(1);
	
			if (this.scrollTop() + this.innerHeight() == this.get(0).scrollHeight)
				this.scrollTop(this.get(0).scrollHeight - this.innerHeight() - 1);
		};
	})(jQuery);
	$(document).on('touchmove', function (e) {
		e.preventDefault();
	}).on("touchmove", ".scrollable", function (e) {
		var $this = $(this)
		if ($this.elemHasScrollBar()) {
			e.stopPropagation();
		}
	}).on("touchstart", ".scroll-y", function (e) {
		var $this = $(this)
		$this.elemScrollFix();
	})

    // get all the events
    var all_events = [];
    $("#events-list li").each(function() {
        var li = $(this);
        var type = li.text();
        li.attr("id", "log-gesture-"+type);
        all_events.push(type);
    });


    // start!
    var hammertime = Hammer(getEl('hitarea'), {
            prevent_default: true,
            no_mouseevents: true
        })
        .on(all_events.join(" "), logEvent);

</script>
</body>
</html>